<ion-header>
    <ion-toolbar color="primary">
        <ion-title>{{tieneEquipo ? '' : listaEquiposMostrar.length > 0 ? 'Buscar equipo' :'Equipo'}}</ion-title>
        <ion-buttons slot="start">
            <ion-button (click)="listaEquiposMostrar.length == 0 ? cerrarModal() : listaEquiposMostrar = []">
                <ion-icon *ngIf="listaEquiposMostrar.length == 0" style="font-size: 25px;" md="close-circle"></ion-icon>
                <ion-icon *ngIf="listaEquiposMostrar.length > 0" style="font-size: 25px;"
                          md="arrow-back-circle-sharp"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-buttons slot="end" *ngIf="tieneEquipo">
            <ion-button (click)="editarEquipo()">
                <ion-icon *ngIf="editar" style="font-size: 25px;" md="save-sharp"></ion-icon>
                <ion-icon *ngIf="!editar" style="font-size: 25px;" md="create-sharp"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content>
    <div class="changeColor" style="height: 100px" *ngIf="!editar && tieneEquipo">
        <br>
        <h1 class="ion-text-center" style="color: white;">{{equipoObjeto.nombre.toUpperCase()}}</h1>
    </div>
    <br>

    <ion-card *ngIf="listaEquiposMostrar.length == 0">
        <ion-card-content>
            <div *ngIf="!editar && tieneEquipo" class="ion-text-center">
                <h2>{{equipoObjeto.descripcion ? equipoObjeto.descripcion : 'Sin Descripción'}}</h2>
            </div>
            <div *ngIf="!tieneEquipo">
                <p class="ion-no-margin ion-text-center">NOMBRE EQUIPO</p>
                <ion-item>
                    <ion-input type="text" class="ion-text-center" [(ngModel)]="equipoObjeto.nombre"
                               required></ion-input>
                </ion-item>
            </div>
            <div *ngIf="editar">
                <p class="ion-no-margin ion-text-center">NOMBRE EQUIPO</p>
                <ion-item>
                    <ion-label position="floating"></ion-label>
                    <ion-input type="text" class="ion-text-center" [(ngModel)]="equipoObjeto.nombre"
                               required></ion-input>
                </ion-item>
                <p class="ion-no-margin ion-text-center">DESCRIPCIÓN</p>
                <ion-item>
                    <ion-label position="floating"></ion-label>
                    <ion-input type="text" class="ion-text-center" [(ngModel)]="equipoObjeto.descripcion"
                               required></ion-input>
                </ion-item>
            </div>
        </ion-card-content>
    </ion-card>

    <div *ngIf="listaEquiposMostrar.length == 0">
        <ion-grid>
            <ion-row>
                <ion-col size="6">
                    <ion-button *ngIf="!tieneEquipo" class="ion-padding" expand="block" color="secondary"
                                (click)="crearEquipo()">
                        Crear
                    </ion-button>
                </ion-col>
                <ion-col size="6">
                    <ion-button *ngIf="!tieneEquipo" class="ion-padding" expand="block" color="secondary"
                                (click)="buscarEquipos()">
                        Buscar
                    </ion-button>
                </ion-col>
            </ion-row>
        </ion-grid>
    </div>


    <div *ngIf="listaEquiposMostrar.length > 0" class="ion-padding">
        <ion-card>
            <ion-row class="ion-padding-bottom" *ngFor="let x of listaEquiposMostrar">
                <ion-col size="9">
                    <ion-label>
                        <h1 class="ion-no-margin">{{x.nombre.toUpperCase()}}</h1>
                        <h3 class="ion-no-margin">{{x.descripcion}}</h3>
                        <h4 class="ion-no-margin">{{'San Jose - Tarrazú'}}</h4>
                    </ion-label>
                </ion-col>
                <ion-col size="3">
                    <ion-button fill="outline" color="primary" (click)="enviarSolicitud(x)">
                        <ion-icon md="add-circle-sharp"></ion-icon>
                    </ion-button>
                </ion-col>
            </ion-row>
        </ion-card>
    </div>


    <div *ngIf="!editar && tieneEquipo">

        <div class="tab">
            <button [ngClass]="tab == 'INFO' ? 'active' : ''" (click)="tab = 'INFO'">Información</button>
            <button [ngClass]="tab == 'JUGADOR' ? 'active' : ''" (click)="tab = 'JUGADOR'">Jugadores</button>
            <button [ngClass]="tab == 'HISTORIAL' ? 'active' : ''" (click)="tab = 'HISTORIAL'">Historial</button>
        </div>

        <div class="ion-text-center ion-padding">
            <div *ngIf="tab == 'INFO'">
                INFO
            </div>

            <div *ngIf="tab == 'JUGADOR'">
                JUGADOR


                <ion-item>
                    <ion-label position="floating"><strong>Buscar</strong></ion-label>
                    <ion-input name="nombre" type="text" [(ngModel)]="texto" (ionChange)="buscar()"></ion-input>
                </ion-item>

                <ion-grid>
                    <ion-row class="ion-padding-bottom">
                        <ion-col size="9"><strong>Usuario</strong>
                        </ion-col>
                        <ion-col size="3"><strong>Acceso</strong></ion-col>
                    </ion-row>
                    <ion-row class="ion-padding-bottom" *ngFor="let jugador of equipoObjeto.jugardores">
                        <ion-col size="9">
                            <ion-label>
                                <h2>{{jugador.usuario.nombre}} {{jugador.usuario.apellidos}}</h2>
                                <h3></h3>
                                <p>{{jugador.usuario.email}}</p>
                            </ion-label>
                        </ion-col>
                        <ion-col size="3">
                            <!--<ion-toggle [(ngModel)]="usuario.activo" (ionChange)="actualizar(usuario)">Habilitar</ion-toggle>-->
                        </ion-col>
                    </ion-row>
                </ion-grid>


                <ion-fab horizontal="end" vertical="bottom" slot="fixed">
                    <ion-fab-button color="secondary" class="">
                        <ion-icon md="share-social-sharp"></ion-icon>
                    </ion-fab-button>
                    <ion-fab-list side="top">
                        <ion-fab-button color="primary" data-desc="SMS">
                            <ion-icon md="mail-sharp"></ion-icon>
                        </ion-fab-button>
                        <ion-fab-button color="primary" data-desc="Whatsapp">
                            <ion-icon md="logo-whatsapp"></ion-icon>
                        </ion-fab-button>
                    </ion-fab-list>
                </ion-fab>

            </div>

            <div *ngIf="tab == 'HISTORIAL'">
                HISTORIAL
            </div>
        </div>

    </div>

</ion-content>
