<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Crear Cacha</ion-title>
    <ion-buttons slot="start">
      <ion-button (click)="cerrarModal()">
        <ion-icon style="font-size: 25px;" md="close-circle"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>



<ion-content>


    <ion-card class="ion-text-center" *ngIf="!isUploading && !isUploaded">
      <ion-card-header>
        <ion-card-title>Foto de la chancha</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="fileUpload btn btn-primary">
          <input
            id="uploadBtn"
            type="file"
            class="upload"
            (change)="uploadFile($event.target.files)"
          />
        </div>
      </ion-card-content>
    </ion-card>
    <ion-card class="ion-text-center" *ngIf="isUploading && !isUploaded">
      <ion-card-header>
        <ion-card-title
          >Archivo selecionado:<b>{{ fileName }}</b></ion-card-title
        >
      </ion-card-header>
   
      <ion-card-content>
        <div *ngIf="percentage | async as pct">
          Progreso: {{ pct | number }}%
          <ion-progress-bar value="{{ pct / 100 }}"></ion-progress-bar>
        </div>
        <div *ngIf="snapshot | async as snap">
          <p class="ion-no-margin">Tamaño del archivo: {{ snap.totalBytes | fileSizePipe }} Transferido: {{ snap.bytesTransferred | fileSizePipe }}</p>
          <div *ngIf="snapshot && snap.bytesTransferred != snap.totalBytes">
            <ion-button
              color="warning"
              size="small"
              (click)="task.pause()"
              class="button is-warning"
              >Pausar</ion-button
            >
            <ion-button
              size="small"
              (click)="task.resume()"
              class="button is-info"
              >Resumir</ion-button
            >
            <ion-button
              color="danger"
              size="small"
              (click)="task.cancel()"
              class="button is-danger"
              >Cancelar</ion-button
            >
          </div>
        </div>
      </ion-card-content>
    </ion-card>
   
   
    <!-- <h2 text-center>Uploaded Freaky Images</h2>
   
    <ion-card color="light" text-center *ngFor="let item of images | async">
      <ion-card-header>
        <ion-card-title>
          {{ item.name }}
        </ion-card-title>
      </ion-card-header>
   
      <ion-card-content>
        <img [src]="item.filepath" />
        <a [href]="item.filepath" target="_blank" rel="noopener">Download</a>
      </ion-card-content>
    </ion-card> -->


  <!-- <ion-card text-center *ngIf="!isUploading && !isUploaded">
    <ion-card-header>
      <ion-card-title>Choose Images to Upload</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="fileUpload btn btn-primary">
        <span>Upload</span>
        <input
          id="uploadBtn"
          type="file"
          class="upload"
          (change)="uploadFile($event.target.files)"
        />
      </div>
    </ion-card-content>
  </ion-card> -->

  <ion-card>
    <ion-card-content>
    <ion-item>
      <ion-label position="floating">Nombre</ion-label>
      <ion-input  [(ngModel)]="canchaObjeto.nombre"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Provincia</ion-label>
      <ion-select [(ngModel)]="canchaObjeto.ubicacion.codigoProvincia" (ionChange)="changeProvincia()" 
      interface="action-sheet" cancelText="Cancelar" doneText="Aceptar">
        <ion-select-option *ngFor="let ubi of ubicacion" value="{{ubi.codigoProvincia}}">{{ubi.descripcion}}</ion-select-option>
      </ion-select>
    </ion-item>
  

    <ion-item *ngIf="provincia">
      <ion-label position="floating" >Cantón</ion-label>
      <ion-select [(ngModel)]="canchaObjeto.ubicacion.codigoCanton" interface="action-sheet" cancelText="Cancelar" doneText="Aceptar">
        <ion-select-option *ngFor="let cant of provincia.canton" value="{{cant.codigoCanton}}">{{cant.descripcion}}</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Dirección</ion-label>
      <ion-input [(ngModel)]="canchaObjeto.direccion"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Monto por Equipo</ion-label>
      <ion-input [(ngModel)]="canchaObjeto.montoEquipo" type="number"></ion-input>
    </ion-item>

    
    <ion-item>
      <ion-label position="floating">Método de Pago</ion-label>
      <ion-select [(ngModel)]="canchaObjeto.metodoPago.tipo" (ionChange)="changeProvincia()" 
      interface="action-sheet" cancelText="Cancelar" doneText="Aceptar">
        <ion-select-option *ngFor="let ubi of ubicacion" value="{{ubi.codigoProvincia}}">{{ubi.descripcion}}</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Telefono Principal</ion-label>
      <ion-input type="number"></ion-input>
    </ion-item>

    <ion-row>
      <ion-col size="6">
        <ion-item class="ion-no-padding">
          <ion-label>Parqueo</ion-label>
          <ion-toggle [(ngModel)]="canchaObjeto.parqueo"></ion-toggle>
        </ion-item>
      </ion-col>
      <ion-col size="6">
        <ion-item class="ion-no-padding">
          <ion-label>Vestidor</ion-label>
          <ion-toggle [(ngModel)]="canchaObjeto.bestidor"></ion-toggle>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="6">
        <ion-item class="ion-no-padding">
          <ion-label>Uniforme</ion-label>
          <ion-toggle [(ngModel)]="canchaObjeto.uniforme"></ion-toggle>
        </ion-item>
      </ion-col>
      <ion-col size="6">
        <ion-item class="ion-no-padding">
          <ion-label>Árbitro</ion-label>
          <ion-toggle [(ngModel)]="canchaObjeto.arbitro"></ion-toggle>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-item-divider class="ion-padding-top">
      <ion-label>
        Horario
      </ion-label>
    </ion-item-divider>


    <ion-row>
      <ion-col size="6">
        <ion-item class="ion-no-padding">
          <ion-label position="floating">Inicio</ion-label>
          <ion-datetime [(ngModel)]="canchaObjeto.horario.horaInicio" cancelText="Cancelar" doneText="Aceptar" displayFormat="h a"></ion-datetime>
        </ion-item>
      </ion-col>
      <ion-col size="6">
        <ion-item class="ion-no-padding">
          <ion-label position="floating">Fin</ion-label>
          <ion-datetime [(ngModel)]="canchaObjeto.horario.horaFin" cancelText="Cancelar" doneText="Aceptar" displayFormat="h a"></ion-datetime>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-item>
      <ion-label position="floating">Tiempo por juego (horas)</ion-label>
      <ion-input [(ngModel)]="canchaObjeto.horario.tiempoJuego" type="number"></ion-input>
    </ion-item>


    <ion-item>
      <ion-label position="floating">Dias</ion-label>
      <ion-select multiple="true" [(ngModel)]="canchaObjeto.horario.dias"
      interface="action-sheet" cancelText="Cancelar" doneText="Aceptar">
        <ion-select-option *ngFor="let dia of dias" value="{{dia}}">{{dia}}</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-card class="ion-text-center" *ngIf="!isUploading && isUploaded">
      <!-- <ion-card-header>
        <ion-card-title>
          <b>{{ fileName }}</b> Uploaded!
        </ion-card-title>
      </ion-card-header> -->
   
      <ion-card-content>
        <div *ngIf="UploadedFileURL | async as url">
          <img [src]="url" />
          <a [href]="url" target="_blank" rel="noopener">Download</a>
        </div>
        <p class="ion-no-margin">Tamaño del archivo: {{ fileSize | fileSizePipe }}</p>

        <!-- <ion-button
          expand="full"
          color="success"
          (click)="isUploading = isUploaded = false"
          >Upload More</ion-button
        > -->
      </ion-card-content>
    </ion-card>

    <ion-button (click)="guardar()" class="ion-padding" expand="block" color="secondary">GUARDAR</ion-button>
    <br>

    </ion-card-content>
  </ion-card>
</ion-content>